<div class="app-layout">

  <!-- Mobile topbar -->
  @if (isMobile()) {
    <header class="mobile-topbar">
      <button class="toggle-btn" (click)="toggleSidebar()" aria-label="Menu">
        <i class="pi pi-bars"></i>
      </button>
      <img src="assets/pjatk-logo.svg" alt="PJATK" class="topbar-logo" />
    </header>
  }

  <!-- Overlay na mobile gdy sidebar otwarty -->
  @if (isMobile() && sidebarVisible()) {
    <div class="sidebar-overlay" (click)="toggleSidebar()"></div>
  }

  <!-- Sidebar -->
  <aside class="app-sidebar" [class.sidebar-hidden]="!sidebarVisible()">
    <div class="sidebar-header">
      <img src="assets/pjatk-logo.svg" alt="PJATK" class="sidebar-logo" />
      @if (!isMobile()) {
        <button class="sidebar-hide-btn" (click)="toggleSidebar()" title="Zwiń panel">
          <i class="pi pi-chevron-left"></i>
        </button>
      }
    </div>

    <nav class="sidebar-nav">
      <p class="nav-section-label">Programy studiów</p>
      <a
        routerLink="/stacjonarne/program"
        routerLinkActive="nav-link-active"
        class="nav-link"
        (click)="isMobile() && sidebarVisible.set(false)"
      >
        <i class="pi pi-calendar"></i>
        Studia stacjonarne
      </a>
      <a
        routerLink="/niestacjonarne/program"
        routerLinkActive="nav-link-active"
        class="nav-link"
        (click)="isMobile() && sidebarVisible.set(false)"
      >
        <i class="pi pi-calendar-clock"></i>
        Studia niestacjonarne
      </a>
    </nav>
  </aside>

  <!-- Przycisk pokazania sidebara gdy schowany na desktop -->
  @if (!isMobile() && !sidebarVisible()) {
    <button class="sidebar-show-btn" (click)="toggleSidebar()" title="Rozwiń panel">
      <i class="pi pi-chevron-right"></i>
    </button>
  }

  <!-- Główna treść -->
  <main class="app-main" [class.no-sidebar]="!sidebarVisible() && !isMobile()">
    <router-outlet />
  </main>

</div>
